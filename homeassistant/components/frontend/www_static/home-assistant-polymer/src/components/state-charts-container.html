<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-spinner/paper-spinner.html">

<link rel="import" href="./state-quick-chart.html">

<dom-module id="state-charts-container">
  <template>
    <style>
    :host {
      display: block;
    }

    .loading-container {
      text-align: center;
      padding: 8px;
    }

    .loading {
      height: 0px;
      overflow: hidden;
    }
    </style>

    <template is='dom-if' if='[[_isLoading]]'>
      <div class='loading-container'>
        <paper-spinner active alt='Updating history data'></paper-spinner>
      </div>
    </template>

    <template is='dom-if' if='[[!_isLoading]]'>
      <template is='dom-repeat' items="[[getChartSeries(stateObj)]]">
        <state-quick-chart
          chart-data="[[item]]"
          chart-type="[[item.type]]"
          chart-label="[[item.label]]">
        </state-quick-chart>
      </template>
    </template>
  </template>
</dom-module>

<script>
Polymer({
  is: 'state-charts-container',

  properties: {
    stateObj: {
      type: Object
    },

    isLoadingData: {
      type: Boolean,
      value: false,
    },

    _apiLoaded: {
      type: Boolean,
      value: true,
    },

    _isLoading: {
      type: Boolean,
      value: false
      // computed: '_computeIsLoading(isLoadingData, _apiLoaded)',
    },
  },

  getChartSeries: function (obj) {
    return obj.attributes.chartSeries;
  },
  // _googleApiLoaded: function () {
  //   window.google.load('visualization', '1', {
  //     packages: ['timeline', 'corechart'],
  //     callback: function () {
  //       this._apiLoaded = true;
  //     }.bind(this),
  //   });
  // },

  // _computeIsLoading: function (_isLoadingData, _apiLoaded) {
  //   return _isLoadingData || !_apiLoaded;
  // },
});
</script>
